(self.webpackChunkproduction_suite=self.webpackChunkproduction_suite||[]).push([[860],{2860:(e,l,t)=>{"use strict";t.r(l),t.d(l,{MaterialsModule:()=>q});var r=t(8583),i=t(7902),a=t(4762);function n(e,l){return{key:"dgsdfgsfdh",fields:[{type:"HIDDEN",key:"id",label:"ID"},{type:"TEXT",key:"name",label:"Name",placeholder:"",required:!0},{type:"TEXT",key:"description",label:"Description",placeholder:"",required:!0},{type:"SELECT",key:"category",label:"Category",multiple:!1,options:{type:"PLAINTEXT",options:e}},{type:"AUTOCOMPLETE",key:"class",label:"Item Class",multiple:!1,options:{type:"PLAINTEXT",options:l}},{type:"NUMBER",key:"baseCost",label:"Base Cost",placeholder:"",required:!0},{type:"TEXT",key:"supplier",label:"Supplier",placeholder:"",required:!0},{type:"TEXT",key:"supplierItemUrl",label:"supplierItemUrl",placeholder:"",required:!0},{type:"NESTED",key:"options",label:"Options",innerForm:{key:"MaterialOptions",fields:[{type:"TEXT",key:"name",label:"Options Name",placeholder:"",required:!0},{type:"NESTED",key:"selections",label:"Selections",innerForm:{key:"SelectionsInnerForm",fields:[{type:"TEXT",key:"value",label:"Value",placeholder:"",required:!0},{type:"TEXT",key:"display",label:"Display",placeholder:"",required:!0},{type:"TEXT",key:"img",label:"Image",placeholder:"",required:!1},{type:"NUMBER",key:"priceAdjustment",label:"Price Adjustment (per unit)",required:!1,step:.01}]}}]}}]}}var s=t(3018),o=t(5032),c=t(3293),d=t(7345),p=t(665),u=t(1585);function g(e,l){if(1&e&&(s.TgZ(0,"div"),s._UZ(1,"app-user-defined-form-viewer",2),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("formControl",e.control)("formDef",e.formDef)}}let m=(()=>{class e{constructor(e){this.fb=e,this.save=new s.vpe}ngOnInit(){this.formDef=n([{value:"apparel",display:"Apparel"},{value:"sign",display:"Sign"}],[{display:"Shirt",value:"Shirt"},{display:"Hat",value:"hat"}]),this.control=this.fb.control(this.material)}emitSave(){this.save.emit(this.control.value)}print(){console.log(JSON.stringify(this.control.value))}}return e.\u0275fac=function(l){return new(l||e)(s.Y36(p.qu))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-material-editor"]],inputs:{material:"material"},outputs:{save:"save"},decls:3,vars:1,consts:[[4,"ngIf"],[3,"click"],[3,"formControl","formDef"]],template:function(e,l){1&e&&(s.YNc(0,g,2,2,"div",0),s.TgZ(1,"button",1),s.NdJ("click",function(){return l.emitSave()}),s._uU(2,"Save"),s.qZA()),2&e&&s.Q6J("ngIf",l.control)},directives:[r.O5,u.vb,p.JJ,p.oH],styles:[""]}),e})();var f=t(9962);function y(e,l){if(1&e&&(s.TgZ(0,"clr-dg-row",13),s.TgZ(1,"clr-dg-cell"),s._uU(2),s.qZA(),s.TgZ(3,"clr-dg-cell"),s._uU(4),s.qZA(),s.TgZ(5,"clr-dg-cell"),s._uU(6),s.qZA(),s.TgZ(7,"clr-dg-cell"),s._uU(8),s.qZA(),s.qZA()),2&e){const e=l.$implicit;s.Q6J("clrDgItem",e),s.xp6(2),s.Oqu(e.name),s.xp6(2),s.Oqu(e.supplier),s.xp6(2),s.Oqu(e.baseCost),s.xp6(2),s.Oqu(e.description)}}function h(e,l){if(1&e){const e=s.EpF();s.TgZ(0,"clr-dg-detail"),s.TgZ(1,"clr-dg-detail-header"),s._uU(2),s.qZA(),s.TgZ(3,"app-material-editor",14),s.NdJ("save",function(l){return s.CHM(e),s.oxw().onSave(l)}),s.qZA(),s._UZ(4,"br"),s._UZ(5,"app-user-defined-form-data-display",15),s.qZA()}if(2&e){const e=l.$implicit,t=s.oxw();s.xp6(2),s.Oqu(e.name),s.xp6(1),s.Q6J("material",e),s.xp6(2),s.Q6J("data",e)("formDef",t.formDef)("nestedDisplayField",t.nestedDisplayField)}}const Z=function(){return[1,2,5,10]},T=[{path:"",component:(()=>{class e{constructor(e,l){this.materialService=e,this.gridHandler=l,this.addModalIsOpen=!1,this.nestedDisplayField={MaterialOptions:{field:"name",nested:{SelectionsInnerForm:{field:"display"}}}},this.formDef=n([],[]),this.materials=[],l.setService(e),l.onItems$.subscribe(e=>this.materials=e),this.materialService.get().then(e=>this.materials=e.items)}onSave(e){console.log("Saved!"),console.log(e);let l=-1;for(let t=0;t<this.materials.length;t++)if(this.materials[t].name===e.name){l=t;break}}ngOnInit(){}addMaterial(e){return(0,a.mG)(this,void 0,void 0,function*(){this.addModalIsOpen=!1,yield this.materialService.add(e),this.materials=(yield this.materialService.get()).items})}}return e.\u0275fac=function(l){return new(l||e)(s.Y36(o.U),s.Y36(c.j))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-materials-list-page"]],decls:27,vars:15,consts:[[1,"btn","btn-primary",3,"click"],["shape","plus"],[3,"clrDgLoading","clrDgSelected","clrDgRefresh","clrDgSelectedChange"],[3,"clrDgField"],[3,"clrDgItem",4,"ngFor","ngForOf"],[4,"clrIfDetail"],[3,"clrDgPageSize","clrDgTotalItems"],["pagination",""],[3,"clrPageSizeOptions"],[3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[3,"save"],[3,"clrDgItem"],[3,"material","save"],[3,"data","formDef","nestedDisplayField"]],template:function(e,l){if(1&e&&(s.TgZ(0,"button",0),s.NdJ("click",function(){return l.addModalIsOpen=!0}),s._UZ(1,"cds-icon",1),s._uU(2," Add\n"),s.qZA(),s.TgZ(3,"clr-datagrid",2),s.NdJ("clrDgRefresh",function(e){return l.gridHandler.refresh(e)})("clrDgSelectedChange",function(e){return l.selected=e}),s.TgZ(4,"clr-dg-column",3),s._uU(5,"Name"),s.qZA(),s.TgZ(6,"clr-dg-column",3),s._uU(7,"Supplier"),s.qZA(),s.TgZ(8,"clr-dg-column",3),s._uU(9,"Base Cost"),s.qZA(),s.TgZ(10,"clr-dg-column",3),s._uU(11,"Description"),s.qZA(),s.TgZ(12,"clr-dg-placeholder"),s._uU(13,"We couldn't find any materials!"),s.qZA(),s.YNc(14,y,9,5,"clr-dg-row",4),s.YNc(15,h,6,5,"clr-dg-detail",5),s.TgZ(16,"clr-dg-footer"),s.TgZ(17,"clr-dg-pagination",6,7),s.TgZ(19,"clr-dg-page-size",8),s._uU(20,"Materials per page"),s.qZA(),s._uU(21),s.qZA(),s.qZA(),s.qZA(),s.TgZ(22,"clr-modal",9),s.NdJ("clrModalOpenChange",function(e){return l.addModalIsOpen=e}),s.TgZ(23,"h3",10),s._uU(24,"Add Material"),s.qZA(),s.TgZ(25,"div",11),s.TgZ(26,"app-material-editor",12),s.NdJ("save",function(e){return l.addMaterial(e)}),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.MAs(18);s.xp6(3),s.Q6J("clrDgLoading",l.gridHandler.loading)("clrDgSelected",l.selected),s.xp6(1),s.Q6J("clrDgField","name"),s.xp6(2),s.Q6J("clrDgField","supplier"),s.xp6(2),s.Q6J("clrDgField","baseCost"),s.xp6(2),s.Q6J("clrDgField","description"),s.xp6(4),s.Q6J("ngForOf",l.materials),s.xp6(3),s.Q6J("clrDgPageSize",2)("clrDgTotalItems",l.gridHandler.total),s.xp6(2),s.Q6J("clrPageSizeOptions",s.DdM(14,Z)),s.xp6(2),s.lnq(" ",e.firstItem+1," - ",e.lastItem+1," of ",e.totalItems," users "),s.xp6(1),s.Q6J("clrModalOpen",l.addModalIsOpen)}},directives:[d.nkF,d.C9t,d.PDs,d.Nh1,d.dml,d.K8c,d.m4W,d.KHL,d.F7K,r.sg,d.i6Q,d.dRQ,d.Ltv,d.YYR,d.qAN,d.VLi,m,d.Z4N,d.Gcc,d.fv_,d.jND,d.c2j,d.ygj,f.g],styles:[""]}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(l){return new(l||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[i.Bz.forChild(T)],i.Bz]}),e})();var D=t(7822);let q=(()=>{class e{}return e.\u0275fac=function(l){return new(l||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[r.ez,v,d.K6A,D.u,p.u5,p.UX]]}),e})()}}]);