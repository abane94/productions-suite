<p>quote-editor works!</p>



<clr-wizard #wizard [clrWizardOpen]="open" (clrWizardOpenChange)="reset($event)">
    <clr-wizard-title>
        <h3>Add Line Item</h3>
        Quant.   {{ order.quantity }}
    </clr-wizard-title>

    <clr-wizard-button [type]="'cancel'">Cancel</clr-wizard-button>
    <clr-wizard-button [type]="'previous'">Back</clr-wizard-button>
    <clr-wizard-button [type]="'next'">Next</clr-wizard-button>
    <clr-wizard-button [type]="'finish'">Done</clr-wizard-button>

    <clr-wizard-page #pageOne [clrWizardPageNextDisabled]="!order.quantity || !order.recipe">
      <ng-template clrPageTitle>Basic Information</ng-template>
      <ng-template clrPageNavTitle>{{ pageOneTitle }}</ng-template>

      <form clrForm clrLayout="horizontal" #formPageOne="ngForm">
        <clr-input-container>
          <label>Quantity</label>
          <input clrInput type="number" name="quant" required [(ngModel)]="order.quantity" />
          <clr-control-error>This field cannot be empty!</clr-control-error>
        </clr-input-container>

        <clr-select-container *ngIf="recipes">
          <label>Recipe</label>
          <select clrSelect name="recipe" [(ngModel)]="order.recipe">
            <option *ngFor="let recipe of recipes" [value]="recipe.id"> <!-- TODO: the value should just be the recipe, but it comes out as [object Object]-->
              {{recipe.name}}
            </option>
          </select>
        </clr-select-container>
      </form>
    </clr-wizard-page>

    <clr-wizard-page #pageTwo (clrWizardPageOnLoad)="generateMaterialDropDowns()">
      <ng-template clrPageTitle>Color</ng-template>
      <ng-template clrPageNavTitle>{{ pageTwoTitle }}</ng-template>
      <form #formPageTwo="ngForm" *ngIf="materialsLoaded">
        <ng-container *ngFor="let material of order.recipeObj.materials.items; let i = index">
            <clr-select-container>
                <label>{{ material.material }}</label>
                <select clrSelect name="recipe" [(ngModel)]="materialSelections[i]">
                  <option *ngFor="let m of materialDropDowns[material.material]" [value]="m.id">
                    {{m.name}}
                  </option>
                </select>
              </clr-select-container>
        </ng-container>

      </form>
    </clr-wizard-page>

    <clr-wizard-page #pageThree [clrWizardPageNextDisabled]="!formPageThreeValid" (clrWizardPageOnLoad)="generateRecipeForm()">
      <ng-template clrPageTitle>Power</ng-template>
      <ng-template clrPageNavTitle>{{ pageThreeTitle }}</ng-template>

      <!-- <form #formPageTwo="ngForm">
        <section class="form-block">
          <label>Your pok&egrave;mon {{ textsplanationOfPower }}.</label>
          <div class="clr-row wizdemo-color-block-row">
            <div *ngFor="let icon of powerSources" class="wizdemo-color-block-wrapper clr-col-3">
              <div
                class="wizdemo-color-block is-icon"
                [class.active]="icon === model.power"
                [class.disabled]="icon === model.weakness"
                (click)="setPower(icon)"
              >
                <cds-icon [attr.shape]="icon"></cds-icon>
              </div>
            </div>
          </div>
        </section>
      </form> -->
      <ng-container *ngIf="recipeFormDef">
        <app-user-defined-form-viewer [formDef]="recipeFormDef" [(ngModel)]="recipeOutput"></app-user-defined-form-viewer>
      </ng-container>
      <button (click)="dumpRecipeForm()">Dump</button>

    </clr-wizard-page>

    <clr-wizard-page #pageFour [clrWizardPageNextDisabled]="!formPageThreeValid">
      <ng-template clrPageTitle>Weakness</ng-template>
      <ng-template clrPageNavTitle>{{ pageFourTitle }}</ng-template>

      <clr-alert [clrAlertClosable]="false" clrAlertType="alert-error" *ngIf="showPowerError">
        <clr-alert-item>
          <span class="alert-text">
            Your power and weakness cannot be from the same source.
          </span>
        </clr-alert-item>
      </clr-alert>

      <form #formPageTwo="ngForm">
        <section class="form-block">
          <label>Your pok&egrave;mon {{ textsplanationOfWeakness }}.</label>
          <div class="clr-row wizdemo-color-block-row">
            <div *ngFor="let icon of powerSources" class="wizdemo-color-block-wrapper clr-col-3">
              <div
                class="wizdemo-color-block is-icon"
                [class.active]="icon === model.weakness"
                [class.disabled]="icon === model.power"
                (click)="setWeakness(icon)"
              >
                <cds-icon [attr.shape]="icon"></cds-icon>
              </div>
            </div>
          </div>
        </section>
      </form>
    </clr-wizard-page>

    <clr-wizard-page #pageFive (clrWizardPageOnLoad)="createRanking()">
      <ng-template clrPageTitle>Summary</ng-template>

      <p>
        Your pok&egrave;mon's name is {{ model.name }}. {{ model.gender === "Male" ? "He" : "She" }} {{
        textsplanationOfPower }} but {{ textsplanationOfWeakness }}.
      </p>

      <p>
        Your pok&egrave;mon's power ranking is: {{ model.ranking }}{{ powerRankingPunctuation }}
      </p>

      <p>
        {{ textsplanationOfRanking }}
      </p>
    </clr-wizard-page>
  </clr-wizard>
